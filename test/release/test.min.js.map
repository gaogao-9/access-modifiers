{"version":3,"sources":["test.js"],"names":["_interopRequireDefault","obj","__esModule","default","testClass","Class","className","it","length","Object","getOwnPropertySymbols","prototype","should","be","exactly","symbols","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","symbol","value","_typeof","err","ins","flag","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","text","every","x","Error","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","constructor","require","_harmonyReflect","_harmonyReflect2","_should","_should2","Promise","resolve","reject","describe","classObj","promiseList","_arr","_loop","name","_i","push","all","then","_ref","Base","Inherit","BaseWithProxy","InheritWithProxy"],"mappings":"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","file":"test.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nrequire(\"babel-polyfill\");\n\nvar _harmonyReflect = require(\"harmony-reflect\");\n\nvar _harmonyReflect2 = _interopRequireDefault(_harmonyReflect);\n\nvar _should = require(\"should\");\n\nvar _should2 = _interopRequireDefault(_should);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 読み込みテスト\nnew Promise(function (resolve, reject) {\n\tdescribe(\"Test Loading\", function () {\n\t\tvar classObj = {};\n\t\tvar promiseList = [];\n\t\tvar _arr = [\"Base\", \"Inherit\", \"BaseWithProxy\", \"InheritWithProxy\"];\n\n\t\tvar _loop = function _loop() {\n\t\t\tvar name = _arr[_i];\n\t\t\tpromiseList.push(new Promise(function (resolve, reject) {\n\t\t\t\tit(\"load ./\" + name + \".js\", function () {\n\t\t\t\t\tclassObj[name] = require(\"./\" + name + \".js\");\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}));\n\t\t};\n\n\t\tfor (var _i = 0; _i < _arr.length; _i++) {\n\t\t\t_loop();\n\t\t}\n\t\tPromise.all(promiseList).then(function () {\n\t\t\tresolve(classObj);\n\t\t}).catch(function (err) {\n\t\t\treject();\n\t\t});\n\t});\n}).then(function (_ref) {\n\tvar Base = _ref.Base;\n\tvar Inherit = _ref.Inherit;\n\tvar BaseWithProxy = _ref.BaseWithProxy;\n\tvar InheritWithProxy = _ref.InheritWithProxy;\n\n\t// Proxy使用版のテスト\n\tdescribe(\"Test for Base\", function () {\n\t\ttestClass(Base, \"Base\");\n\t});\n\tdescribe(\"Test for Inherit\", function () {\n\t\ttestClass(Inherit, \"Inherit\");\n\t});\n\n\t// Proxy不使用版のテスト\n\tdescribe(\"Test for Base with Proxy\", function () {\n\t\ttestClass(BaseWithProxy, \"Base\");\n\t});\n\tdescribe(\"Test for Inhert with Proxy\", function () {\n\t\ttestClass(InheritWithProxy, \"Inherit\");\n\t});\n});\n\nfunction testClass(Class, className) {\n\tit(\"Create Instance\", function () {\n\t\tvar ins = new Class();\n\t});\n\tit(\"Check ClassSymbolLength\", function () {\n\t\tvar ins = new Class();\n\t\tvar length = Object.getOwnPropertySymbols(Class.prototype).length;\n\n\t\tlength.should.be.exactly(4);\n\t});\n\tit(\"Check ClassSymbolType\", function () {\n\t\tvar ins = new Class();\n\t\tvar symbols = Object.getOwnPropertySymbols(Class.prototype);\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = symbols[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar symbol = _step.value;\n\n\t\t\t\t(typeof symbol === \"undefined\" ? \"undefined\" : _typeof(symbol)).should.be.exactly(\"symbol\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tit(\"Check ClassSymbolValue\", function () {\n\t\tvar ins = new Class();\n\t\tvar symbols = Object.getOwnPropertySymbols(Class.prototype);\n\n\t\tvar flag = [false, false, false, false];\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = symbols[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar symbol = _step2.value;\n\n\t\t\t\tvar text = typeof ins[symbol] === \"function\" ? ins[symbol]() : ins[symbol];\n\t\t\t\t(typeof text === \"undefined\" ? \"undefined\" : _typeof(text)).should.be.exactly(\"string\");\n\t\t\t\tif (text === \"this is private method from \" + className) {\n\t\t\t\t\tflag[0] = true;\n\t\t\t\t} else if (text === \"this is protected method from \" + className) {\n\t\t\t\t\tflag[1] = true;\n\t\t\t\t} else if (text === \"this is private field from \" + className) {\n\t\t\t\t\tflag[2] = true;\n\t\t\t\t} else if (text === \"this is protected field from \" + className) {\n\t\t\t\t\tflag[3] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tflag.every(function (x) {\n\t\t\treturn x;\n\t\t}).should.be.exactly(true);\n\t});\n\tit(\"Check InstanceSymbolLength\", function () {\n\t\tvar ins = new Class();\n\t\tvar length = Object.getOwnPropertySymbols(ins).length;\n\t\tif (className === \"Base\") {\n\t\t\tlength.should.be.exactly(2);\n\t\t} else if (className === \"Inherit\") {\n\t\t\tlength.should.be.exactly(3);\n\t\t} else {\n\t\t\tthrow new Error(\"classNameの値が不正です: \" + className);\n\t\t}\n\t});\n\tit(\"Check InstanceSymbolType\", function () {\n\t\tvar ins = new Class();\n\t\tvar symbols = Object.getOwnPropertySymbols(ins);\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = symbols[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar symbol = _step3.value;\n\n\t\t\t\t(typeof symbol === \"undefined\" ? \"undefined\" : _typeof(symbol)).should.be.exactly(\"symbol\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tit(\"Check InstanceSymbolValue\", function () {\n\t\tvar ins = new Class();\n\t\tvar symbols = Object.getOwnPropertySymbols(ins);\n\n\t\tvar flag = [false, false, false];\n\t\tvar _iteratorNormalCompletion4 = true;\n\t\tvar _didIteratorError4 = false;\n\t\tvar _iteratorError4 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator4 = symbols[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t\t\t\tvar symbol = _step4.value;\n\n\t\t\t\tvar text = ins[symbol];\n\t\t\t\t(typeof text === \"undefined\" ? \"undefined\" : _typeof(text)).should.be.exactly(\"string\");\n\t\t\t\tif (text === \"this is private field from \" + className) {\n\t\t\t\t\tflag[0] = true;\n\t\t\t\t} else if (text === \"this is protected field from \" + className) {\n\t\t\t\t\tflag[1] = true;\n\t\t\t\t} else if (className === \"Inherit\") {\n\t\t\t\t\tif (text === \"this is private field from Base\") {\n\t\t\t\t\t\tflag[2] = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (className === \"Base\") {\n\t\t\t\t\tthrow new Error(\"unknown symbol from \" + className + \": \" + symbol);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError4 = true;\n\t\t\t_iteratorError4 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t\t\t\t\t_iterator4.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError4) {\n\t\t\t\t\tthrow _iteratorError4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (className === \"Base\") {\n\t\t\tflag[2] = true;\n\t\t}\n\n\t\tflag.every(function (x) {\n\t\t\treturn x;\n\t\t}).should.be.exactly(true);\n\t});\n}"],"sourceRoot":"/source/"}